#!/bin/bash
BASE=`pwd`
sudo echo " "

# Install latest vim ----------------------------------------------------------
VIM_PPA_EXISTS=$(apt-cache policy | grep "pi-rho" | wc -l)
if (( $VIM_PPA_EXISTS < 1 )); then
	sudo apt-get update
	sudo apt-get install software-properties-common -y
	sudo add-apt-repository ppa:pi-rho/dev
	sudo apt-get update
	sudo apt-get install python-dev global -y
	sudo apt-get install vim vim-nox vim-rails cmake -y
	if hash X; then
		sudo apt-get install vim-gnome -y # For clipboard sharing
	fi
fi

# Install Plugin Manager ------------------------------------------------------
if [ ! -e ~/.vim/autoload/plug.vim ]; then
	echo "Plugin Manager is not found. cloning..."
	curl -fLo ~/.vim/autoload/plug.vim --create-dirs \
		https://raw.githubusercontent.com/junegunn/vim-plug/master/plug.vim
fi

# Install Plugins -------------------------------------------------------------
export PLUGIN_BASE="$HOME/.vim/plugged"
cp vimrc ~/.vimrc
vim +PlugInstall +qall

# Install Plugins :: YouCompleteMe
export YCM_BASE="$PLUGIN_BASE/YouCompleteMe"
./vim-ycm-language-support
cp ycm_extra_conf.py ~/.vim/

# Install Plugins :: fzf.vim :: Ag
if ! hash ag; then
	sudo apt-get install silversearcher-ag -y
fi

